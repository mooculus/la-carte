\makeatletter
\usepackage[T1]{fontenc}
\usepackage{stix}
\usepackage{gillius}

\usepackage{multicol}

%% Size of the page
\usepackage[margin=.5in, includehead, includefoot, hmargin={.8in,.5in}, paperwidth=8.5in, paperheight=8.5in]{geometry}
%\usepackage[margin=.5in, includehead, includefoot, hmargin={.8in,.5in}, paperwidth=11in, paperheight=8.5in]{geometry}


%% Redefine section and subsection
\renewcommand\section{\@startsection {section}{1}{\z@}%
                                   {-3.5ex \@plus -1ex \@minus -.2ex}%
                                   {2.3ex \@plus.2ex}%
                                   {\normalfont\Large\bfseries\sffamily}}
\renewcommand\subsection{\@startsection{subsection}{2}{\z@}%
                                     {-3.25ex \@plus -1ex \@minus -.2ex}%
                                     {1.5ex \@plus .2ex}%
                                     {\normalfont\large\bfseries\sffamily}}


%% Redefine "question"
\let\question\relax
\let\endquestion\relax
%\let\c@pquestion\relax
\newtheoremstyle{question}
{\topsep}{\topsep}{\rmfamily}{}{\bfseries\sffamily}{:}{ }{Question}
\theoremstyle{question}
\newtheorem*{question}{}

%% Redefine "example"
\let\example\relax
\let\endexample\relax
%\let\c@example\relax
\newtheoremstyle{example}
{\topsep}{\topsep}{\rmfamily}{}{\bfseries\sffamily}{:}{ }{Example}
\theoremstyle{example}
\newtheorem*{example}{}

%% Redefine "warning"
\let\warning\relax
\let\endwarning\relax
%\let\c@example\relax
\newtheoremstyle{warning}
{\topsep}{\topsep}{\rmfamily}{}{\bfseries\sffamily}{:}{ }{WARNING}
\theoremstyle{warning}
\newtheorem*{warning}{}


%% Redefine "definition"
\let\definition\relax
\let\enddefinition\relax
%\let\c@example\relax
\newtheoremstyle{definition}
{\topsep}{\topsep}{\rmfamily}{}{\bfseries\sffamily}{:}{ }{Definition}
\theoremstyle{definition}
\newtheorem*{definition}{}






%% Redefines "explanation"
\renewmdenv[
  font=\upshape,
  linewidth=3mm,
  topline=false,
  bottomline=false,
  leftline=true,
  rightline=false, 
  leftmargin=0,
  innertopmargin=0pt,
  innerbottommargin=0pt,
  skipbelow=\baselineskip,
  linecolor=textColor!20!white,
  fontcolor=textColor,
  backgroundcolor=background
]{explanation}%
















%% Define exercise collection. 
\newcommand{\exerciseCollection}[2]{
\def\input@path{{#1}}
\activity{#1#2}}


\newcommand{\practicestyle}{
\let\exercise\relax
\let\endexercise\relax
\let\c@exercise\relax
\let\problem\relax
\let\endproblem\relax
\let\c@problem\relax
\newtheoremstyle{problem}
{\topsep}{\topsep}{\rmfamily}{}{\bfseries\sffamily}{)}{ }{}
\theoremstyle{problem}
\newtheorem{problem}{}
\newtheorem{exercise}[problem]{}
\twocolumn[\section{Exercises for Chapter~\thetitlenumber}\vspace*{-1em}\hrule height .5mm \vspace*{.5em}]
\small
%% \let\exercise\relax
%%   \let\endexercise\relax
%%   \let\c@exercise\relax 
%%   \newtheoremstyle{exercise}
%%                   {\topsep}{\topsep}{\rmfamily}{}{\bfseries}{)}{~}{}
%% \theoremstyle{exercise}
%% \newtheorem{exercise}{}
}
\renewcommand\chapterstyle{%
  \def\activitystyle{activity-chapter}
  \onecolumn
  \normalsize
  %\onecolumn
  \def\maketitle{%
    \addtocounter{titlenumber}{1}%
                    {\flushleft\small\sffamily\bfseries\@pretitle\par\vspace{-1.5em}}%
                    {\flushleft\LARGE\sffamily\bfseries\thetitlenumber\hspace{1em}\@title \par }%
                    {\vskip .6em\noindent\textit\theabstract\setcounter{problem}{0}\setcounter{section}{0}}%
                    \par\vspace{2em}
                    \phantomsection\addcontentsline{toc}{section}{\textbf{\thetitlenumber\hspace{1em}\@title}}%
}}

\onecolumn
\makeatother
